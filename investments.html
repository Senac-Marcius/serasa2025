<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <title>investimento</title>
    </head>
    <body>
        <h1>Cadastre seu investimento</h1>
        <section id="scRegister">
            <form>
            <label>Nome: </label><input id="name" type="text"/><br>
            <label>Descrição: </label><input id="description" type="text"/><br>
            <label>Data: </label><input id="date" type="date"><br>
            <label>Url: </label><input id="url" type="text"/><br>
            <label>Valor investido: </label><input id="amountInvested" type="number"/><br>
            <label>Renda mensal: </label><input id="monthlyIncome" type="number"/><br>
            <label>Valor total: </label><input id="totalValue" type="number"/><br>
            <button type="button" id="register" onclick="handleRegister()">Cadastrar</button><br>
        </form>
        </section>
        <section id="scList">
            <table>
                <thead>
                    <th>Nome</th>
                </thead>
                <tbody>

                </tbody>
            </table>
        </section>
        
    </body>
    <script>
        var invests = []
        function setInvest(req){
            const idDescription = /^[A-Za-z\s]+$/;
            const idUrl = /^(https?:\/\/[^\s]+)$/;
            const idCreateAt = /^\d{4},\d{2}-\d{2}$/;

            if (!idDescription.test(req.description)){
                return "Campo description deve conter apenas letras";
            }


            console.log(req.url)
            if (!idUrl.test(req.url)){
                return "Campo url deve conter o seguinte formato https://dominio.com";
            }

            let I = {
                id: invests.length,
                description: req.description,
                url: req.url,
                createAt: req.createAt,
                userId: req.userId,
                num: req.num
            }
            invests.push(I)
            return "investido"
        } 
        
   
        function handleRegister(){
            console.log(
                setInvest({
                    description: document.getElementById("description").value,
                    url: document.getElementById("url").value,
                    createAt: "2025-02-12",
                    userId: 0,
                    num: 100
                })
            )
            
            listInvests(invests)
            
        }

        function listInvests(){
            const tbody = document.querySelector("#scList tbody")
            tbody.innerHTML = ""
            
            invests.forEach(i => {
                const row = document.createElement("tr")

                const tdName = document.createElement("td")
                tdName.textContent = i.description
                
                row.appendChild(tdName)
                tbody.appendChild(row)
            })
        }

    </script>
</html>