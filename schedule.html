<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="post.js"></script> -->
    <link rel="stylesheet" href="./style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Olá, Mundo!</title>
</head>

<body>
    <div class="container-titles">
        <h1>Cadastre seu objeto</h1>
    </div>
    <section id="scRegister">
        <div class="container-1">
            <div class="container-input row mb-3">
                <label for="Url" class="col-sm-2 col-form-label">Url:</label>
                <div class="col-sm-5">
                    <input type="url" class="form-control" id="urls">
                </div>
            </div>
            <div class="container-input row mb-3">
                <label for="Descricao" class="col-sm-2 col-form-label">Descrição:</label>
                <div class="col-sm-5">
                    <textarea name="Descricao" class="form-control" id="description"></textarea>
                </div>
            </div>
            <button type="button" onclick="handleRegister()" class="btn btn-primary">Cadastrar</button>
        </div>
    </section>
    <section id="scList">
        <table>
            <thead>
                <th>Nome:</th>
            </thead>
            <tbody>

            </tbody>
        </table>
    </section>


</body>
<script>
    var posts = []

    function setPost(req) {

        const urlPattern = /^(https?:\/\/)[^\s$.?#].[^\s]*$/;
        const datePattern = /^\d{4}-\d{2}-\d{2}$/;

        // if (!idPattern.test(req.id)) {
        //     return "Campo ID deve conter apenas números"
        // }

        // if (!idPattern.test(req.userId)) {
        //     return "Campo userId deve conter apenas números"
        // }

        if (!urlPattern.test(req.urls)) {
            return "Campo url deve conter o seguinte formato https://dominio."
        }

        if (!datePattern.test(req.createAt)) {
            return "Campo createAt deve conter o seguinte formato YYYY-MM-DD"
        }

        if (req.description.length > 244) {
            return "Campo description deve conter até 244 caracters"
        }

        let p = {
            id: posts.length - 1,
            description: req.description,
            urls: req.urls, // http://qualquercoisa. ou https://qualquercoisa.
            createAt: req.createAt, // YYYY-MM-DD
            userId: req.userId
        }
        posts.push(p)
        console.log('Cadastrado!!')
    }

    function handleRegister() {
        console.log(setPost({
            description: document.getElementById('description').value,
            urls: document.getElementById('urls').value,
            createAt: '2000-12-31',
            userId: 0
        }))

        console.log(posts)
    }
</script>

</html>