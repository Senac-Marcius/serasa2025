<!DOCTYPE html>
    <head>
        <meta charset="UTF-8" />
        <title>Lançamento</title>
        <style>
           body{
                    margin: 0;
                }
            
            h1{
                text-align: center;
                color: #a777e3;
                background: rgb(243 241 206);
                margin: 0;
            }

            section {
                display: flex;
                margin: 0 auto;
                flex-direction: column;
            }
            #scRegister
        {

        }

        #scList
        {
        }

        .row {
            display: flex;
            margin-top: 50px;
            padding: 20px;
        }

        lebel {
            font-weight: 600;
        }

        br {
            margin: 10px;
        }


        button {
                background: linear-gradient(135deg, #6e8efb, #a777e3);
                color: white;
                border: none;
                padding: 12px 24px;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
                cursor: pointer;
                transition: all 0.3s ease-in-out;
                position: relative;
                overflow: hidden;
                margin: 20px auto 0;
                display: block;
            }

            button:hover {
                background: linear-gradient(135deg, #5b77e0, #925ec4);
                box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.3);
                transform: translateY(-2px);
            }

            button:active {
                transform: translateY(1px);
                box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);
            }

            button.round {
                width: 35px;
                height: 35px;
                border-radius: 50%;
            }

            button.dell {
                background: #ff0000;

            }

            button.edit {
                background: #ffff00;

            }


            form {
                background-color: #F2F2F2;
                padding: 40px;
                border-radius: 20px;
                box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            }


        </style>

    </head>
    <body>
        <h1>Cadastre o seu Lançamento</h1>
        <div class="row"> 

            <section id="scregister"> 
                <form>
                <input id="id" type="hidden" value="-1"/>
                <label>Observação: </label><input id="observation" type="text"/><br> 
                <label>Nota: </label><input id="note" type="number"/><br>
                <label>Presença: </label><input id="presence" type="text"/><br>
                <label>Indicador: </label><input id="indicator" type="text"/><br>
                <button type="button" id="register" onclick="handleRegister()">CADASTRAR</button>
            </section>
            </form>

            <section id="scList">
                <table>
                    <thead>
                        <th>Observação</th>                       
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </section>
        </div>

    
    </body>
    <script>
        var launchs = []
        function setLaunch(req){
            const userIdRegex = /^\d+$/;
            const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
            const observationRegex = /^[a-zA-Z0-9\s]*$/; 

            // if (!userIdRegex.test(req.userId)) {
            // return "Campo userId deve conter apenas números"
            // }

            // if (!dateRegex.test(req.createAt)) {
            // return "Campo createAt deve conter o seguinte formato YYYY-MM-DD"
            // }
            
            // if (!observationRegex.test(req.observation)) {
            //     return "Campo observation deve conter apenas letras, números e espaços"
            // }
            
            let l = {
                id: launchs.length,
                createAt: req.createAt,
                note: req.note,
                observation: req.observation,
                presence: req.presence,
                indicator: req.indicator
            }
          
            launchs.push(l)

        }
        
        function handleRegister(){
            let id = document.getElementById('id').value

            if(id == -1){
                console.log(
                    setLaunch({
                    createAt: "2000-12-31",
                    note: document.getElementById("note").value,
                    observation: document.getElementById("observation").value,
                    presence: document.getElementById("presence").value,
                    indicator: document.getElementById("indicator").value,
                    userId: 0

            }))
    

            }else if(id > -1){
    
              putLaunch({
                createAt: "2000-12-31",
                note: document.getElementById("note").value,
                observation: document.getElementById("observation").value,
                presence: document.getElementById("presence").value,
                indicator: document.getElementById("indicator").value,
                userId: 0},id)

            }else{
                console.log("Erro")
            }
            
           
            listLaunchs(launchs)
        }

        function editLaunch(id){ // ela edita
            let launch = launchs.find(l => l.id == id)

            document.getElementById("observation").value = launch.observation
            document.getElementById("note").value = launch.note
            document.getElementById("presence").value = launch.presence
            document.getElementById("indicator").value = launch.indicator
            document.getElementById("id").value = launch.id
        }

            // TIRAR DUVIDA SE APAGA ESSA E DEIXA A DE CIMA 
            function putLaunch(req, id){

                    if(id == -1) return "Não encontrado"

                    if (req.userId != undefined) launchs[id].userId = req.userId 
                    if (req.observation != undefined) launchs[id].observation = req.observation 
                    if (req.presence != undefined) launchs[id].presence = req.presence 
                    if (req.indicator != undefined) launchs[id].indicator = req.indicator 
                
                    return launchs[id]
            }
                   
                document.getElementById('id').value = -1
                listLaunchs(launchs)

  // ATE AQUI


        function listLaunchs(plist){
            const tbody = document.querySelector("#scList tbody")
            tbody.innerHTML = ""

            plist.forEach(l => {
                const row = document.createElement("tr");
                const indicatorCell = document.createElement("td");
                indicatorCell.textContent = l.indicator;

              
                
                const editcell = document.createElement("td");
                const editbutton = document.createElement("button");
                editbutton.className = "round edit"
                editbutton.onclick = function(){
                    editLaunch (l.id)
                };

                editcell.appendChild(editbutton);



                const dellcell = document.createElement("td"); //criou uma td na variavel
                const dellbutton = document.createElement("button");
                dellbutton.className = "round dell" //criou um botão na variavel
                dellcell.appendChild(dellbutton); // criou um botão na td



                row.appendChild(indicatorCell);
                row.appendChild(editcell); //adicionou a td na tela
                row.appendChild(dellcell);
                tbody.appendChild(row);
        })
    }
    </script>
</html>