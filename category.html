<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Category</title>
    <style>
        button.round {
            width: 35px;
            height: 35px;
            border-radius: 50%;
        }
        form {
            background-color: #eacff8;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }
        body {
            margin: 0;
        }
        h1 {
            text-align: center;
            color: #000000;
            background-color: #f0d2f5;
        }
        section {
            display: flex;
            margin: 0 auto;
            flex-direction: column;
        }
        .row {
            display: flex;
            margin-top: 50px;
            padding: 20px;
        }
        label {
            font-weight: 600;
        }
        br {
            margin: 10px;
        }
        button {
            background: linear-gradient(135deg, #9e01ff, #ff75cc);
            color: rgb(0, 0, 0);
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
            margin: 20px auto 0;
            display: block;
        }
        button:hover {
            background: linear-gradient(135deg, #ff01b3d8, #bf00ff);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(1px);
            box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);
        }
        button.round {
            width: 35px;
            height: 35px;
            border-radius: 50%;
        }
        button.dell {
            background: #ff006fe2;
        }
        button.edit {
            background: #d579ff;
        }
        /* Adicionando estilo para alinhar os botões lado a lado */
        .action-buttons {
            display: flex;
            gap: 10px; /* Espaço entre os botões */
        }
    </style>
</head>
<body>
    <h1>Cadastre sua categoria</h1>
    <div class="row">
        <section id="scRegister">
            <form>
                <input id="id" type="hidden" value="-1"/> 
                <label>Nome: </label><input id="name" type="text"/><br>
                <label>Categoria: </label><input id="category" type="text"/><br>
                <label>Descrição: </label><input id="description" type="text"/><br>
                <label>Cor: </label><input id="color" type="text"/><br>
                <button type="button" id="register" onclick="handleRegister()">CADASTRAR</button>
            </form>   
        </section>
        <section id="scList">
            <table>
                <thead>
                    <th>Nome</th>
                    <th>Ação</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </section>
    </div>

    <script>
        var categories = [];

        function setCategory(req){
            let c = {
                id: categories.length,  // Atribuindo um id único à categoria
                description: req.description,
                category: req.category,
                name: req.name,
                color: req.color,
                creatAt: req.creatAt,
            };
            categories.push(c);
            return "Cadastro realizado com sucesso!";
        } 

        function handleRegister(){
            let id = document.getElementById('id').value;

            if (id == -1) {
                console.log(setCategory({
                    name: document.getElementById("name").value,
                    category: document.getElementById("category").value,
                    description: document.getElementById("description").value,
                    color: document.getElementById("color").value,
                    creatAt: "2025-02-28"
                }));
            } else if (id > -1) {
                // Atualizando categoria existente
                let updatedCategory = categories.find(c => c.id == id);
                updatedCategory.name = document.getElementById("name").value;
                updatedCategory.category = document.getElementById("category").value;
                updatedCategory.description = document.getElementById("description").value;
                updatedCategory.color = document.getElementById("color").value;

                document.getElementById('id').value = -1; // Resetando o ID para novo cadastro
            } else {
                console.log("Erro ao tentar cadastrar.");
            }

            listCategories(categories);
        }

        function editCategories(id) {
            let category = categories.find(c => c.id == id);

            // Preenchendo o formulário com os dados da categoria para edição
            document.getElementById("description").value = category.description;
            document.getElementById("category").value = category.category;
            document.getElementById("name").value = category.name;
            document.getElementById("color").value = category.color;
            document.getElementById("id").value = category.id; // Definir o id para edição
        }

        function deleteCategory(id) {
            categories = categories.filter(c => c.id !== id); // Remover a categoria da lista
            listCategories(categories); // Recarregar a lista
        }

        function listCategories(cList) {
            const tbody = document.querySelector("#scList tbody");
            tbody.innerHTML = "";

            cList.forEach(c => {
                const row = document.createElement("tr");

                const nameCell = document.createElement("td");
                nameCell.textContent = c.name;  // Exibir o nome da categoria

                const actionCell = document.createElement("td");
                actionCell.className = "action-buttons"; // Adicionando classe para alinhar os botões

                const editButton = document.createElement("button");
                editButton.className = "edit";
                editButton.textContent = "Editar";  // Texto dentro do botão
                editButton.onclick = function() {
                    editCategories(c.id);
                };

                const deleteButton = document.createElement("button");
                deleteButton.className = "dell";
                deleteButton.textContent = "Excluir";  // Texto dentro do botão
                deleteButton.onclick = function() {
                    deleteCategory(c.id);
                };

                actionCell.appendChild(editButton);
                actionCell.appendChild(deleteButton);

                row.appendChild(nameCell);
                row.appendChild(actionCell);

                tbody.appendChild(row);
            });
        }
    </script>
</body>
</html>
