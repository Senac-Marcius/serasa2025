<!DOCTYPE html>
    <head>
        <meta charset="UTF-8" />
        <title>orçamento</title>
        <style>
            body{
                margin: 0;
            }
            h1{
                text-align: center;
                color: #4EB1D9;
                 background-color: #F2F2F2;
                margin: 0;

                #scRegister{

                }
                scList{

                }
        
            }
        </style>
    </head>
    <boby>
            <h1>cadastre seu orçamento</h1>

            <section id="scRegister">
                <form>
                    <label>Nome: </label><input id="name" type="text"/><br><br>
                <label>Url: </label><input id="url" type="text"/><br><br>
                <label>Valor: </label><input id="value" type="number"/><br><br>
                <label>Data Inicial: </label><input id="startDate" type="Date"/><br><br>
                <label>Data Final: </label><input id="endDate" type="Date"/><br><br>
                <button type="button" id="register" onclick="handleRegister()">CADASTRAR</button>
                </form>
            </section>

            <section id="scList">
            <table>
                <thead>
                    <th>nome</th>
                    <tbody>

                    </tbody>
                </thead>
            </table>
            </section>
    
    </boby>
    <script>
        var ocements = []

        function setBudget(req){
           
            const urlPattern = /^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;
            const valuePattern =/^\d+(\.\d{1,2})?$/;
            const startDatePattern = /^\d{4}-\d{2}-\d{2}$/;
            const endDatePattern = /^\d{4}-\d{2}-\d{2}$/;            
           

            if (! urlPattern.test(req.url)){
                return "campo url deve conter o seguinte formato https://dominio."
            }
            if(!valuePattern.test (req.value)){
                return "o campo value deve conter apenas digitos"
            }

            if (!startDatePattern.test(req.startDate)){
                return "campo createAt deve contar o seguinte formato YYYY-MM-DD"
            }

            if (!endDatePattern.test(req.endDate)){
                return "campo createAt deve contar o seguinte formato YYYY-MM-DD"
            }

            if (req.name.length > 100) {
                return "campo name deve conter até 100 caracteres"
            }
            let b = {
                id: ocements.length - 1,
                name: req.name,
                url:req.url,
                createAt: req.createAt,
                userId: req.userId,
                value: req.value,
                startDate: req.startDate,
                endDate: req.endDate
            
            }
            ocements.push(b)
            return "budget cadastrado"
}


        function handleRegister(){

    console.log(
                setBudget({
                
                name: document.getElementById("name").value, 
                url: document.getElementById("url").value,
                createAt: "2023-01-30",
                userId: 0,
                value: document.getElementById("value").value,
                startDate: document.getElementById("startDate").value,
                endDate: document.getElementById("endDate").value, 

            })
        ) 
        listOcements(ocements)  
    }

    function listOcements(bList){
        const tbody = document.querySelector("#scList tbody")
        tbody.innerHTML =""

        ocements.forEach(b => {
            const row = document.createElement("tr"); 

            const nameCell = document.createElement("td");
            nameCell.textContent = b.name

            row.appendChild(nameCell);
            tbody.appendChild (row);
        })
    }
    </script>
</html>

