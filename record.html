<!DOCTYPE html>
<html lang="pt-BR">

<head>

    <meta charset="UTF-8" />
    <title>Registro</title>
    <style>
        body{
            margin: 0
        }

        h1{
            text-align: center;
            color: #7139BF;
            background-color: #F2F2F2;
            margin: 2;
        }

        section {
            display: flex;
            margin: 0 auto;
            flex-direction: column;
            text-align: center;
        }

        #scRegister{

        }

        #scList{

        }

        .row {
            display: flex;
            margin-top: 50px;
            padding: 20px;
        }

        label {
            font: weight 600

        }

        form{
            background-color: #F2F2F2;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
           
        }
        
        button {
                background: linear-gradient(135deg, #6e8efb, #a777e3);
                color: white;
                border: none;
                padding: 12px 24px;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
                cursor: pointer;
                transition: all 0.3s ease-in-out;
                position: relative;
                overflow: hidden;
                margin: 20px auto 0;
                display: block;
            }

            button:hover {
                background: linear-gradient(135deg, #5b77e0, #925ec4);
                box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.3);
                transform: translateY(-2px);
            }

            button:active {
                transform: translateY(1px);
                box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.2);

            }



    </style>
</head>

<body>
    <h1>Realize o seu registro:</h1>
    <div class="row">
    <section id="scRegister">
        <form>
            <label>Nome: </label><input id="name" type="text"/><br><br>
            <label>Descrição: </label><textarea id="description"></textarea><br><br>
            <label>Saúde: </label><input id="health" type="text"/><br><br>
            <label>Alergia: </label><input id="allergy" type="text"/><br><br>
            <label>Doença: </label><input id="sick" type="text"/><br><br>
            <label>Medicação: </label><input id="medication" type="text"/><br><br>
            <button type="button" id="register" onclick="handleRegister()">CADASTRAR</button>
    
        </form>
    </section>
    
    <section id="scList">
        <table>
            <thead>
                    <th>ID:</th>
            </thead>
            <tbody>

            </tbody>
        </table>
    </section>
    </div>
</body>

<script>
    var records = []

    function setRecord(req) {
        const DATE_REGEX = /^(\d{4})-(\d{2})-(\d{2})$/
        const ID_REGEX = /^\d+$/

        if (!DATE_REGEX.test(req.createdAt)) {
            return "Data inválida! Use o formato YYYY-MM-DD."
        }

        if (!ID_REGEX.test(req.userId.toString())) {
            return "Campo userId deve conter apenas números"
        }

        let r = {
            id: records.length,
            name: req.name,
            description: req.description,
            health: req.health,
            allergy: req.allergy,
            sick: req.sick,
            medication: req.medication,
            createdAt: req.createdAt,
            userId: req.userId
        }

        records.push(r)
        return "Cadastrado com sucesso!"
    }

    function handleRegister() {
        let newRecord = {
            name: document.getElementById("name").value,
            description: document.getElementById("description").value,
            health: document.getElementById("health").value,
            allergy: document.getElementById("allergy").value,
            sick: document.getElementById("sick").value,
            medication: document.getElementById("medication").value,
            createdAt: "2025-03-21",  
            userId: 0  
        }


        let result = setRecord(newRecord)
        console.log(result)

        listRecord(records)

    }

    function listRecord(rList){
            const tbody = document.querySelector("#scList tbody")
            tbody.innerHTML = ""

        rList.forEach(r => {
            const row = document.createElement("tr")

            const idRecord = document.createElement("td")
            idRecord.textContent = r.id;

            const viewCel = document.createElement("td")
            const viewButton = document.createElement("button")
            viewCel.appendChild(viewButton)


            const delCel = document.createElement("td")
            const delButton = document.createElement("button")
            delCel.appendChild(delButton)


            row.appendChild(idRecord)
            row.appendChild(viewCel)
            row.appendChild(delCel)


            tbody.appendChild(row)
        })
    }
</script>
</html>
