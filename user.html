<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Usuário</title>

</head>

<body>
  <br>
  <h1>Você pertence a nossa escola?</h1>
  <form>
    <input type="checkbox" id="userExterno" value="userExterno">
    <label> Sou um usuário externo</label><br>
    <input type="checkbox" id="UserInterno" value="UserInterno">
    <label for="UserInterno">Sim. Sou um usuário interno</label><br>
  </form>
  <br>
  <hr>

  <h1>Insira as suas informações:</h1>

  <form>
    <label>Nome:</label><br>
    <input type="text" id="userName" /><br>

    <label>Senha:</label><br>
    <input type="password" id="userPassword" /><br>

    <label>CPF:</label><br>
    <input type="text" id="userCPF" /><br>

    <label>Idade:</label><br>
    <input type="number" id="userAge" /><br>

    <label>Phone:</label><br>
    <input type="text" id="userPhone" /><br>

    <label>Email:</label><br>
    <input type="email" id="userEmail" /><br>

    <label>Endereço:</label><br>
    <input type="text" id="userAddress" /><br>
    <br>
    <button type="button" id="register" onclick="handleRegister()">Cadastrar</button>
  </form>

</body>

<script>

  var users = []
  //Criando o objeto User
  function setUser(req) {
    const cpfRegex = /^\d{3}\.\d{3}\.\d{3}-\d{2}$/;
    const phoneRegex = /^\(\d{2}\)\d{5}-\d{4}$/;
    const Dataregex = /^(?:(?:19|20)\d{2})-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])$/;
  
    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

    if(!cpfRegex.test(req.cpf)){
      return "O formato do CPF está incorreto. Use: XXX.XXX.XXX-XX"
    }
    if(!phoneRegex.test(req.phone)){
      return "O formato do telefone está incorreto. Use o formato: (XX)XXXXX-XXXX"
    }
    if(!Dataregex.test(req.createAT)){
      return "O formato da data está incorreto. Use o formato: YYYY-MM-D"
    }
    if(!emailRegex.test(req.emailRegex)){
      return "O formato do e-mail está incorreto. Use o formato: example@domain.com";
    }


    let u = {
      idUser: users.length - 1,
      name: req.name,
      password: req.password,
      cpf: req.cpf,
      age: req.age,
      phone: req.phone,
      email: req.email,
      address: req.address,
      createAT: req.createAT
    }

    users.push(u)

    return "Usuário criado com sucesso!";

  }

  //botão onclick
  function handleRegister() {
    console.log(
      setUser({
        
        name: document.getElementById("userName").value,
        password: document.getElementById("userPassword").value,
        cpf: document.getElementById("userCPF").value,
        age: document.getElementById("userAge").value,
        phone: document.getElementById("userPhone").value,
        email: document.getElementById("userEmail"),
        address: document.getElementById("userAddress").value,
        createAT: "2025-26-02"
      })
    )
    console.log(users)
  }

</script>

</html>